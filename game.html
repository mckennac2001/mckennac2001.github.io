<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	
	<title>The Game</title>
	<!--   <link rel='stylesheet' type="test/css" media='screen and (min-width: 601px)' href='css/gameStyle.css'/>
	<link rel='stylesheet' type="test/css" media='screen and (min-width: 150px) and (max-width: 600px)' href='css/gameStyle-thin.css'/> -->
	<link rel='stylesheet' type="test/css" href='css/gameStyle.css'/>
	
	<script src="js/map.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
	<script>
		var map;
		var markers = [];
		var myLocation = null;
		
		function initialiseMyLocation(location) {
			console.log(location);
			alert(location);
			myLocation = location;
		}
		
		function panToMyLocation(location) {
			if (location != null) {
				map.panTo(location.coords.latitude, location.coords.longitude);
			}
		}
		
		function populateMarkers() {
			
			var markerArray = [new google.maps.LatLng(53.33, -6.2), new google.maps.LatLng(53.23, -6.1)]
			
			for (var i=0; i<markerArray.length; i++) {
				var marker = new google.maps.Marker({
					position: markerArray[i],
					map: map,
					icon: "img/rabbit_icons_sm2.png"
				});
			}			
		}
		
		// Add a marker to the map and push to the array.
		function addMarker(location) {
		  var marker = new google.maps.Marker({
		    position: location,
		    map: map
		  });
		  markers.push(marker);
		}
		
		// Sets the map on all markers in the array.
		function setAllMap(map) {
		  for (var i = 0; i < markers.length; i++) {
		    markers[i].setMap(map);
		  }
		}

		// Removes the markers from the map, but keeps them in the array.
		function clearMarkers() {
		  setAllMap(null);
		}

		// Shows any markers currently in the array.
		function showMarkers() {
		  setAllMap(map);
		}

		// Deletes all markers in the array by removing references to them.
		function deleteMarkers() {
		  clearMarkers();
		  markers = [];
		}
		
		function initialize() {
			
			navigator.geolocation.getCurrentPosition(initialiseMyLocation);

			var mapOptions = {
				zoom : 10,
				center : new google.maps.LatLng(53.33, -6.2)
			};
			
			map = new google.maps.Map(document.getElementById('mapcanvas'),	mapOptions);
			
		  	google.maps.event.addListener(map, 'click', function(event) {
				addMarker(event.latLng);
			});
			  
			$('#showTargets').click(showMarkers);
			$('#hideTargets').click(clearMarkers);
			$('#myLocation').click(panToMyLocation(myLocation));
			
		}
		google.maps.event.addDomListener(window, 'load', initialize);
	</script>

</head>
<body class="body">

	<header class="mainheader">
		<nav><ul>
			<li ><a href="index.html">Home</a></li>
			<li class="active"><a href="#">Current Games</a></li>
			<li><a href="#">New Game</a></li>
			<li><a href="#">Home</a></li>
		</ul></nav>
	</header>
		
	<div class="maincontent">
		<div class="content">
			<div id="mapcanvas"></div>
			<button id="reset">Reset</button>
			<button id="myLocation">My Location</button>
			<button id="showTargets">Show Targets</button>
			<button id="hideTargets">Remove Targets</button>
		</div>
	</div>
	
	<aside class="top-sidebar">
		<img src="./img/rabbit.png">
	</aside>
	
	<aside class="middle-sidebar">
		<article>
			<h2>Middle Sidebar</h2>
			<p>We're crating a new Java Enterprise application, replacing an legacy JSP 
			solution. <p>
		</article>
	</aside>
	
	<aside class="bottom-sidebar">
		<article>
			<h2>Bottom Sidebar</h2>
			<p>We're crating a new Java Enterprise application, replacing an legacy JSP 
			solution. Due to many many changes, the UI<p>
		</article>
	</aside>
	
	<footer class="mainfooter">
		<p>Copyright &copy; 2014 <a href="#" title="Charles Mc Kenna">Charles Mc Kenna</a></p>
	</footer>
</body>
</html>